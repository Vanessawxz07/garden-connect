# 新游拓展专项 PRD

## 一、需求背景

### 1.1 项目现状
网站当前主要服务 **Grow a Garden** 游戏玩家，提供道具价值、道具 Wiki、交易价值计算器、文章内容、宠物管理等功能。

### 1.2 扩展计划
随着用户搜索需求与扩展计划，我们计划支持第二款 Roblox 游戏 **Blox Fruits**。

> **Blox Fruits** 是一款基于《海贼王》灵感制作的 Roblox 动作冒险游戏，玩家通过获取和使用各种"果实"获得特殊能力，在开放世界中刷怪升级、打 Boss、PvP 对战并探索多个海域，是 Roblox 上人气最高、玩法最丰富的刷级与战斗类游戏之一。
> 
> 游戏链接：https://www.roblox.com/games/2753915549/Blox-Fruits#!/about

### 1.3 需求目标

1. 支持 Blox Fruits 可交易道具的价值展示、Wiki 信息、交易系统、列表功能、文章内容等功能
2. 在不破坏现有 GAG 功能的前提下，新增一套独立的 Blox Fruits 功能区域
3. 形成多游戏架构的基础，为未来扩展第 3 款或更多游戏打下基础
4. 能抽象成配置或组件的，尽量抽象，以便后续更快速的增加新游戏

---

## 二、基础框架设计

### 2.1 URL结构规范

| 类型 | URL结构 | 示例 |
|------|---------|------|
| 游戏首页 | `/{gameKey}` | `/growagarden`、`/bloxfruits` |
| 道具Value列表 | `/{gameKey}/value` | `/growagarden/value` |
| Wiki列表 | `/{gameKey}/wiki` | `/bloxfruits/wiki` |
| 道具详情 | `/{gameKey}/wiki/{道具名称id}` | `/bloxfruits/wiki/dragon-fruit` |
| 交易列表 | `/{gameKey}/tradelist` | `/growagarden/tradelist` |
| 创建交易 | `/{gameKey}/trade/create` | `/bloxfruits/trade/create` |
| 计算器 | `/{gameKey}/calculator` | `/growagarden/calculator` |
| 聊天 | `/{gameKey}/chat` | `/bloxfruits/chat` |
| Tier List | `/{gameKey}/{道具类型}-tierlist` | `/growagarden/pets-tierlist`、`/bloxfruits/fruits-tierlist` |
| 更新日志 | `/{gameKey}/updatelog` | `/bloxfruits/updatelog` |

### 2.2 公共页面URL

| 类型 | URL结构 | 说明 |
|------|---------|------|
| 公共首页 | `/` | 覆盖多款游戏的介绍和入口 |
| 用户主页 | `/user/{用户uid}` | 所有游戏共用一个用户中心页 |
| 个人设置 | `/settings` | 所有游戏共用一个用户中心设置页 |
| About Us | `/about` | 公共页面 |

### 2.3 导航与视觉体系

- 每个游戏有**独立的导航栏+footer**，随着页面路径 `/{gameKey}/` 切换
- 公共页面有**一套独立的导航栏+footer**
- 整体视觉风格会根据游戏来区分（如导航栏、banner、主色调）
- UI公共组件尽可能复用

### 2.4 SEO相关设置

- 每个游戏有独立的sitemap地址：
  - `/growagarden/sitemap.xml`
  - `/bloxfruits/sitemap.xml`
- 每个游戏写入对应页面的结构化数据字段信息（如面包屑、FAQs、Articles等）

---

## 三、MVP阶段需求清单（PM: 雪竹）

### 3.1 页面模块

| 序号 | 页面模块 | 优先级 | 规划点 | 是否抽象为配置 | 是否需要按游戏区分 | GAG页面URL | BF页面URL | 后续新游URL模板 | 说明 |
|------|----------|--------|--------|----------------|-------------------|-------------|-----------|-----------------|------|
| 1 | 导航栏 | P0(MVP) | 默认与单游戏切换的逻辑，一、二级入口 | ✅ 是 | 是 | 独立导航栏 | 独立导航栏 | 独立导航栏 | 公共页面(如首页、关于我们、隐私政策等)单独一套导航栏，给出每款游戏的入口 |
| 2 | footer | P0(MVP) | 默认与单游戏切换的逻辑 | ✅ 是 | 是 | 独立footer | 独立footer | 独立footer | 公共页面单独一套footer，给出每款游戏的入口 |
| 3 | 公共首页 | P0(MVP) | 新增 | ❌ 否 | 否 | — | — | — | 公共首页需要改版，覆盖多款游戏的介绍和入口 |
| 4 | 单游戏首页 | P0(MVP) | 原首页中GAG的内容要保留，给新游首页先提供入口 | — | 是 | /growagarden | /bloxfruits | /{新游名称} | — |
| 5 | 用户主页 | P0(MVP) | 默认与单游戏切换的逻辑 | ❌ 否 | 否 | /user/{用户uid} | /user/{用户uid} | /user/{用户uid} | 所有游戏共用一个用户中心页，页面增加一级游戏筛选 |
| 6 | 个人中心设置页 | P0(MVP) | 隐私设置中增加新游内容tab的隐私设置 | ❌ 否 | 否 | /settings | /settings | /settings | 所有游戏共用一个用户中心设置页 |
| 7 | 聊天页面 | P0(MVP) | 默认与单游戏切换的逻辑 | ❌ 否 | 是 | /growagarden/chat | /bloxfruits/chat | /{新游戏}/chat | 方便用户区分目前是交易哪款游戏道具 |
| 8 | 订单列表页 | P0(MVP) | 订单列表组件样式更新：格子数量、WFL提示变化（是否能抽象为可配置） | ⏳ 待定 | 是 | /growagarden/tradelist | /bloxfruits/tradelist | /{新游名称}/tradelist | — |
| 9 | 订单详情页 | P0(MVP) | 内容模块更新；订单主逻辑是否有调整？ | ⏳ 待定 | 是 | /growagarden/tradelist/{订单id} | /bloxfruits/tradelist/{订单id} | /{新游名称}/tradelist/{订单id} | — |
| 10 | 创建交易页 | P0(MVP) | 主要变更：WFL差值限制，gap>40%不能提交 | ⏳ 待定 | 是 | /growagarden/trade/create | /bloxfruits/trade/create | /{新游名称}/trade/create | — |

### 3.2 公共组件

| 序号 | 组件名称 | 优先级 | 规划点 | 待讨论事项 |
|------|----------|--------|--------|------------|
| 1 | 组件-订单列表 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具展示的关键字段 |
| 2 | 组件-道具信息卡片 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具展示的关键字段 |
| 3 | 组件-道具交易信息卡片 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具展示的关键字段 |
| 4 | 组件-道具交易信息弹窗 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具展示的关键字段 |
| 5 | 组件-道具选择弹窗 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具展示的关键字段、格子数量(BF最多4个) |
| 6 | 组件-道具参数设置弹窗 | P0(MVP) | UI/UX复用；根据新游戏的关键数据字段设计 | 需确认BF道具的可配置参数 |

---

## 四、待讨论事项

> 以下事项需要逐一确认，确认后将更新到对应章节

### 4.1 导航栏
- [ ] 公共导航栏的一级菜单有哪些？
- [ ] 游戏导航栏的菜单结构是否统一？
- [ ] 如何实现游戏切换入口？

### 4.2 Footer
- [ ] 公共footer与游戏footer的内容差异？
- [ ] 游戏切换入口的展示形式？

### 4.3 公共首页
- [ ] 首页的整体布局风格？
- [ ] 各游戏入口的展示形式（卡片/Tab/轮播）？

### 4.4 单游戏首页
- [ ] GAG首页内容是否需要调整？
- [ ] BF首页需要展示哪些模块？

### 4.5 用户主页
- [ ] 游戏筛选的交互形式？
- [ ] 各游戏数据的展示结构？

### 4.6 个人中心设置页
- [ ] 新游隐私设置的具体内容？

### 4.7 聊天页面

#### 4.7.1 URL结构与路由

| URL | 说明 |
|-----|------|
| `/chat` | 聊天页主路径，默认展示"All"标签 |
| `/chat?tab=all` | 全部会话 |
| `/chat?tab=system` | 系统通知（公共） |
| `/chat?tab=gag` | GAG游戏相关会话 |
| `/chat?tab=bf` | BF游戏相关会话 |
| `/chat?conv={会话id}` | 直接打开指定会话 |

#### 4.7.2 页面布局与Tab筛选

**顶部Tab栏**
- All：全部会话（默认）
- System：系统通知
- GAG：Grow a Garden 相关
- BF：Blox Fruits 相关

**Tab交互逻辑**
- 切换Tab时更新URL参数 `?tab=xxx`
- 各Tab显示未读消息数红点
- 无参数进入时默认显示"All"

#### 4.7.3 游戏角标标识

| 会话类型 | 角标规则 |
|----------|----------|
| 用户私聊 | 展示所属游戏角标（GAG/BF图标） |
| 系统通知-公共 | 无游戏角标 |
| 系统通知-游戏相关 | 展示对应游戏角标 |

#### 4.7.4 入口场景与默认行为

| 入口场景 | 跳转URL | 默认行为 |
|----------|---------|----------|
| 公共导航栏点击"MESSAGE" | `/chat` | 展示All标签 |
| GAG导航栏点击"MESSAGE" | `/chat?tab=gag` | 展示GAG标签 |
| BF导航栏点击"MESSAGE" | `/chat?tab=bf` | 展示BF标签 |
| 订单确认后自动跳转 | `/chat?conv={会话id}` | 直接打开与对方的1v1聊天 |
| 用户主页点击"Send Message" | `/chat?conv={会话id}` | 直接打开与该用户的1v1聊天（远期规划） |

#### 4.7.5 URL参数优先级

当存在多个参数时，按以下优先级处理：

1. `conv={会话id}` → 直接打开指定会话
2. `tab=system` → 展示系统通知标签
3. `tab=gag` / `tab=bf` → 展示对应游戏标签
4. 无参数 → 默认展示All标签

#### 4.7.6 已确认项

- [x] 聊天页采用公共路径 `/chat`，不分游戏
- [x] 通过顶部Tab实现游戏筛选（All/System/GAG/BF）
- [x] 用户私聊展示游戏角标
- [x] 系统通知区分公共与游戏相关，游戏相关显示角标

### 4.8 订单列表页
- [ ] BF的格子数量为4个（GAG为12个），如何抽象配置？
- [ ] WFL提示的差异点？

### 4.9 订单详情页
- [ ] 订单主逻辑是否有调整？
- [ ] 内容模块有哪些更新？

### 4.10 创建交易页
- [ ] WFL差值限制 gap>40% 的具体规则？
- [ ] 是否有其他业务规则差异？

### 4.11 公共组件-道具展示
- [ ] BF道具的关键数据字段有哪些？
- [ ] 与GAG道具展示的主要差异？

---

## 五、版本变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| V1.0 | 2025-01-XX | 初始版本，建立MVP阶段需求清单 | 雪竹 |

