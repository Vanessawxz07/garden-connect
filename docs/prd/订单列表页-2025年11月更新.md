# 订单列表页 - 2025年11月更新

> 本文档记录订单列表页的现网版本需求，作为后续新游戏拓展专项的基线参考。
<img width="1187" height="817" alt="image" src="https://github.com/user-attachments/assets/e36c4618-5baa-4e54-84d6-650891edaf00" />
<img width="1158" height="692" alt="image" src="https://github.com/user-attachments/assets/ffd5b296-d92b-4c1c-8592-a525ab403ed8" />

---

# 【迭代版本】2025年12月6日 - 增加支持Token交易

## 一、订单卡片 - Token迭代

### 1.1 指定订单卡片

**Token展示：**
- 左右侧6宫格中增加Token道具展示（Token图标 + 外显数量）
- Token可与其他道具混排
- Token添加后自动排列在第一个格子
- Value比例、WFL文案和交互保持不变

**展示示例：**
```
┌─────────────────────────────────────────────────────────────────────┐
│ [头像] Pet collector    [🪙500][道具1][道具2][道具3]                 │
│        12 minutes ago              9,999+                           │
│                                         5 More                      │
│                             WIN                                      │
│              Trade provider (left side) get extra value. (+25%)      │
│                                                                      │
│        Offering Value: 815k ████████████                             │
│        Looking for Value: 112k ████                      [TRADE]    │
│                                                                      │
│                             [🪙100][道具4]                           │
└─────────────────────────────────────────────────────────────────────┘
```

### 1.2 Open Offer卡片 - 展示调整

**展示规则矩阵：**

| NLF设置 | Value条件 | 展示效果 |
|--------|----------|---------|
| N | N | 不变，右侧为空，显示"Looking For: Open" |
| Y | N | 右侧显示NLF条件 |
| N | Y | 右侧显示Value条件 + 问号图标 + 中间比例条 |
| Y | Y | 合并展示，同时显示NLF和Value条件 + 中间比例条 |

**Value条件展示：**
- 中间Value比例条均展示（按实际左右侧Value计算，右侧可以为0）
- 增加问号图标，tooltip提示文案：`Open offer must meet the minimum value/tokens requirement: {value值(KMB标记)} ≈ {数量} tokens`
- 文案格式：`Lowest value/token required: {value值} / 🪙 {token数量}`
- 示例：`Lowest value/token required: 112k / 🪙 10`

**NLF条件展示：**
- 如有设置，显示道具种类数量（如：`NLF: 5 Items`）
- 点击后打开NLF道具弹窗（与订单详情页的Offer List交互相同）
- 如未设置，显示 `NLF: N/A`

**12/4补充：**
- 只要有Value条件的情况下都展示中间比例条
- 文案与有Value条件时一样

**展示示例（有Value和NLF）：**
```
┌─────────────────────────────────────────────────────────────────────┐
│ [头像] dondonqiang1   [🪙500][道具1][道具2][道具3]                   │
│        12 minutes ago              9,999+                           │
│                                         5 More                      │
│                                                                      │
│        Offering Value: 70.74M  ████████████████████                  │
│        Looking For Value: 36.75M ██████████           [TRADE]       │
│                                                                      │
│        % Lowest value/token required: 36.75M / 🪙 735               │
│                                                     NLF: N/A        │
└─────────────────────────────────────────────────────────────────────┘
```

**展示示例（有Value，有NLF）：**
```
┌─────────────────────────────────────────────────────────────────────┐
│ [头像] yutou888       [道具1][道具2][道具3][道具4]                   │
│        12 minutes ago              9,999+                           │
│                                                                      │
│        Offering Value: 87.21M  ████████████████████                  │
│        Not accepting                                   [TRADE]       │
│                                                                      │
│        % Lowest value/token required: 44.55M / 🪙 891               │
│                                                     NLF: 3          │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 二、Token Offer筛选项（P2，暂不开发）

**新增筛选项：**
- Token Offer筛选开关
- 默认关闭
- 开启后：筛选包含Token的交易订单

**筛选器布局：**
```
┌──────────────┬─────────────┬────────────┬──────────────┐
│ 🐾 Pet Filter│ User Online │ Open Offer │ Token Offer  │
└──────────────┴─────────────┴────────────┴──────────────┘
```

---

## 三、其他场景复用

### 3.1 订单详情页 - Offer List模块

- 与常规指定订单时的右侧效果一致
- Token展示在6宫格第一格
- 其他信息不变

### 3.2 个人中心页

- 复用6宫格新样式、逻辑
- Token格子展示与订单卡片一致

---

# 【基线版本】2025年11月 - 原有页面需求

---

## 一、页面概述

订单列表页展示所有交易订单的汇总列表，是用户浏览和发现交易机会的主要入口。

---

## 二、页面结构

### 2.1 页面头部

**标题区域：**
- H1标题：Trades / Trading Market
- 副标题说明文案
- 当前活跃订单数统计

**快捷操作：**
- 创建交易按钮（醒目位置）
- 我的订单入口

### 2.2 搜索区域

**搜索框：**
- 支持搜索道具名称
- 支持搜索用户名
- 输入即搜索（debounce）

**搜索结果：**
- 高亮匹配关键词
- 显示匹配类型（道具/用户）

### 2.3 筛选器

**道具分类筛选：**
- All Categories
- Crops
- Pets
- Eggs
- Gear
- Tokens

**交易方向筛选：**
- All
- Selling（我想买）
- Buying（我想卖）

**状态筛选：**
- Open（开放中）
- Trading（交易中）
- 已完成/已取消（默认隐藏）

**Value筛选：**
- 最小Value
- 最大Value

**其他筛选：**
- 仅显示在线用户
- 排除NLF中有我的道具的订单

**筛选器布局：**
- 桌面端：侧边栏或顶部横向
- 移动端：收起为筛选抽屉

### 2.4 排序控制

**排序选项：**
- 最新发布（默认）
- 最近活跃
- Value最高
- Value最低
- 最多报价

### 2.5 订单列表

**列表布局：**
- 卡片列表
- 每行一个订单卡片

**订单卡片内容：**

| 区域 | 内容 |
|------|------|
| 用户信息 | 头像、用户名、在线状态、VIP标识 |
| Have区域 | 道具卡片列表（图片+名称+数量）、总Value |
| Want区域 | 道具卡片列表或"Accept Any Offer"、总Value |
| Value对比 | Have Value vs Want Value、差额 |
| NLF指示 | 若设置了NLF显示图标和数量提示 |
| 互动数据 | 报价数、浏览数 |
| 时间信息 | 发布时间、最近更新时间 |
| 操作按钮 | 查看详情、快速报价 |

### 2.6 分页

**分页组件：**
- 页码显示
- 上一页/下一页
- 跳转到指定页
- 每页条数选择（10/20/50）

---

## 三、功能说明

### 3.1 订单卡片交互

**点击行为：**
- 点击卡片任意区域跳转订单详情页
- 快速报价按钮打开报价弹窗（不跳转）

**Hover效果：**
- 卡片边框高亮
- 显示快捷操作按钮

### 3.2 快速报价

**报价弹窗：**
- 显示订单基本信息
- 道具选择器
- 报价备注输入
- 提交按钮

**状态反馈：**
- 提交中loading
- 成功提示
- 错误提示

### 3.3 NLF过滤

**过滤开关：**
- "Hide trades with my items in NLF"
- 需登录使用
- 开启后隐藏不匹配的订单

### 3.4 实时更新

**新订单提示：**
- 有新订单时顶部显示提示条
- 点击刷新加载新订单
- 不自动刷新避免列表跳动

**状态更新：**
- 订单状态变更实时反映
- 已完成订单标记样式变化

---

## 四、SEO优化

### 4.1 TDK设置

**Title：**
- [Game Name] Trading Market - Buy & Sell Items | [平台名称]

**Description：**
- Trade [Game Name] items with players worldwide. Browse [X]+ active trades for Crops, Pets, Eggs, and more.

**H1：**
- Trading Market（唯一H1）

### 4.2 URL结构

**路由设计：**
- 主列表：/trades
- 分类筛选：/trades?category=pets
- 方向筛选：/trades?direction=selling
- 组合筛选：/trades?category=pets&direction=selling&sort=newest

**规范化：**
- 参数顺序固定
- 空参数不显示
- canonical标签

### 4.3 结构化数据

**WebPage结构化数据：**
```json
{
  "@type": "WebPage",
  "name": "Trading Market",
  "description": "页面描述"
}
```

**BreadcrumbList：**
```json
{
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "position": 1, "name": "Home", "item": "/" },
    { "position": 2, "name": "Trades", "item": "/trades" }
  ]
}
```

---

## 五、用户个人订单视图

### 5.1 入口

- 导航栏"My Trades"入口
- 个人中心跳转

### 5.2 我的订单筛选

**状态筛选：**
- 全部
- 进行中（Open + Trading）
- 已完成
- 已取消

**订单类型：**
- 我发布的（My Listings）
- 我报价的（My Offers）

### 5.3 订单管理

**我发布的订单：**
- 编辑订单
- 取消订单
- 查看报价列表
- 接受/拒绝报价

**我报价的订单：**
- 查看报价状态
- 撤回报价
- 跳转订单详情

---

## 六、响应式设计

### 6.1 桌面端

- 侧边栏筛选器
- 宽卡片完整显示
- 三栏布局可选

### 6.2 平板端

- 筛选器顶部横向
- 卡片自适应宽度
- 两栏布局

### 6.3 移动端

- 筛选器收起为抽屉
- 卡片全宽
- 道具列表横向滚动
- 简化信息展示

---

## 七、性能优化

### 7.1 列表优化

- 虚拟列表（大数据量）
- 骨架屏加载
- 图片懒加载

### 7.2 筛选优化

- 防抖处理
- 接口缓存
- 增量更新

### 7.3 预加载

- 鼠标悬停预加载详情
- 分页预加载下一页

---

# 版本变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| V1.1 | 2025-12-06 | 增加支持Token交易：订单卡片Token展示、Open Offer卡片展示调整（NLF+Value条件合并展示）、Token Offer筛选项（P2暂不开发）、个人中心页复用等 | - |
| V1.0 | 2025-11-XX | 初始版本：订单列表页基线需求 | - |
