# 创建交易页与订单详情页 - 2025年11月更新

> 本文档记录创建交易页和订单详情页的现网版本需求，作为后续新游戏拓展专项的基线参考。

---

## 一、创建交易页

### 1.1 页面概述

创建交易页是用户发布交易信息的核心入口，支持用户选择道具、设置交易条件并发布交易。

### 1.2 功能模块

#### 1.2.1 道具选择模块

**Have区域（我有的道具）：**
- 支持添加多个道具
- 每个道具需选择：道具类型、具体道具、数量
- 道具类型包括：Crops、Pets、Eggs、Gear、Tokens等
- 支持道具搜索（模糊匹配道具名称）
- 显示道具图片、名称、Value值

**Want区域（我想要的道具）：**
- 结构与Have区域一致
- 支持添加多个想要的道具
- 可设置"Accept Any Offer"选项

#### 1.2.2 NLF（Not Looking For）模块

**功能说明：**
- 用户可设置不接受的道具列表
- 在订单详情页展示NLF信息
- 帮助过滤不符合条件的报价

**交互逻辑：**
- 点击"Add NLF"按钮展开NLF设置区域
- NLF道具选择逻辑与Want区域一致
- 支持添加多个NLF道具

#### 1.2.3 交易条件设置

**Value条件：**
- 可设置期望的Value范围
- 支持"至少X Value"的条件设置

**备注信息：**
- 支持添加交易备注（最多200字符）
- 用于补充说明交易条件

#### 1.2.4 Trade Summary

**显示内容：**
- Have道具汇总及总Value
- Want道具汇总及总Value
- Value差额计算
- NLF道具列表预览

**作用：**
- 发布前确认交易信息
- 直观展示交易的价值对比

### 1.3 发布流程

1. 用户填写Have道具
2. 用户填写Want道具（或选择Accept Any Offer）
3. 可选：设置NLF
4. 可选：设置Value条件和备注
5. 确认Trade Summary
6. 点击发布按钮
7. 系统校验并创建交易订单

### 1.4 SEO优化

**TDK设置：**
- Title: Create Trade - [Game Name] Trading
- Description: Create your trade offer for [Game Name] items
- Keywords: 相关游戏和交易关键词

---

## 二、订单详情页

### 2.1 页面概述

订单详情页展示单个交易订单的完整信息，支持查看、报价、沟通等操作。

### 2.2 页面结构

#### 2.2.1 订单头部信息

**基础信息：**
- 订单ID
- 发布时间
- 订单状态（Open/Trading/Completed/Cancelled）
- 发布者信息（头像、用户名、在线状态）

**操作区域：**
- 收藏按钮
- 分享按钮
- 举报按钮（他人订单）
- 编辑/取消按钮（自己订单）

#### 2.2.2 交易内容区域

**Have区域：**
- 道具卡片列表
- 每个卡片显示：道具图片、名称、数量、Value
- 总Value汇总

**Want区域：**
- 道具卡片列表（或"Accept Any Offer"标识）
- 每个卡片显示：道具图片、名称、数量、Value
- 总Value汇总

**NLF区域：**
- 标题："Not Looking For"
- 展示用户设置的NLF道具列表
- 道具卡片样式与Have/Want一致
- 若无NLF则不显示该区域

**Value对比：**
- Have总Value
- Want总Value
- 差额显示

#### 2.2.3 报价模块

**报价表单：**
- 选择要报价的道具（与创建交易页道具选择逻辑一致）
- 显示报价Value与订单Want Value的对比
- 添加报价备注

**报价列表：**
- 展示所有收到的报价
- 每个报价显示：报价者信息、报价道具、报价Value、报价时间
- 订单发布者可接受/拒绝报价
- 报价者可撤回未处理的报价

#### 2.2.4 沟通入口

- 显示"Chat with Trader"按钮
- 点击跳转至聊天页
- 显示未读消息数量提示

### 2.3 订单状态流转

```
Open（开放中）
  ↓ 发布者接受报价
Trading（交易中）
  ↓ 双方确认完成
Completed（已完成）

Open（开放中）
  ↓ 发布者取消
Cancelled（已取消）
```

### 2.4 OG分享信息

**分享卡片内容：**
- 标题：[道具名称] Trade on [平台名称]
- 描述：Trading [Have道具] for [Want道具]
- 图片：主要道具图片或平台默认图

**UTM参数：**
- 分享链接携带utm_source、utm_medium、utm_campaign参数
- 用于追踪分享来源

### 2.5 SEO优化

**TDK设置：**
- Title: [Have道具] for [Want道具] - Trade #[订单ID]
- Description: Trade offer: [Have道具描述] looking for [Want道具描述]
- H1: 使用道具交易信息作为主标题

**结构化数据：**
- 使用Product结构化数据
- 包含道具信息、价值、状态等

### 2.6 FAQ模块

**常见问题：**
- How to make an offer?
- How to complete a trade?
- What is NLF?
- How to report a scam?

**实现方式：**
- 使用FAQ结构化数据
- 页面底部折叠展示

---

## 三、关联逻辑说明

### 3.1 道具选择器复用

创建交易页和订单详情页的报价模块共用同一套道具选择器组件：
- 统一的道具类型分类
- 统一的搜索逻辑
- 统一的道具卡片样式

### 3.2 NLF逻辑贯穿

- 创建时设置NLF
- 详情页展示NLF
- 报价时NLF作为参考（非强制校验）
- 道具列表页可按NLF过滤

### 3.3 Value计算一致性

- 创建页Trade Summary的Value计算
- 详情页Value对比的计算
- 报价Value对比的计算
- 均使用统一的Value计算逻辑

### 3.4 Token支持

- Have/Want/NLF均支持选择Token类型道具
- Token与普通道具使用相同的选择和展示逻辑
- Token的Value按系统设定值计算
